<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Data-Oriented Programming in Rust | Daniele Bonatto </title> <meta name="author" content="Daniele Bonatto"> <meta name="description" content="Exploring how Rust’s ownership model aligns with Data-Oriented Programming principles."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <meta name="google-site-verification" content="FgBzDEZ-uBkggCipS0HD3XQMihCYVm5Vo7SAHFL46Ds"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://dbonattoj.github.io/blog/2024/dop-rust/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="https://dbonattoj.github.io/"> <span class="font-weight-bold">Daniele </span> Bonatto </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Welcome </a> </li> <li class="nav-item "> <a class="nav-link" href="/about/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Data-Oriented Programming in Rust</h1> <p class="post-meta"> December 30, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/rust"> <i class="fa-solid fa-hashtag fa-sm"></i> rust</a>     ·   <a href="/blog/category/programming"> <i class="fa-solid fa-tag fa-sm"></i> programming</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h4 id="introduction-a-relatable-struggle">Introduction: A Relatable Struggle</h4> <p>I remember redesigning a particular application in object-oriented programming with UML for hours. Every time, I would tweak it for “better abstractions,” layering abstractions on top of abstractions to make it as “flexible as possible” for future requirements. Each iteration made the application harder to reason about, and when threading entered the mix, things got even worse.</p> <p>This experience made me deeply skeptical of unnecessary complexity in software design. While object-oriented programming (OOP) works well for some problems, it often adds unnecessary layers of abstraction that turn into liabilities over time. Nowadays, I lean more toward functional and data-oriented approaches. My recent applications use very few abstractions - inheritance is almost nonexistent, and I rely heavily on interfaces and composition.</p> <p>I really love this talk if you want to dig deeper on paradigms: <a href="https://www.youtube.com/watch?v=SFv8Wm2HdNM" rel="external nofollow noopener" target="_blank">The Forgotten Art of Structured Programming - Kevlin Henney, 2019</a></p> <h4 id="the-appeal-of-data-oriented-programming">The Appeal of Data-Oriented Programming</h4> <p>Recently, I was tinkering with <em>Data-Oriented Programming</em> by Yehonathan Sharvit. The book mostly uses JavaScript and Java to explain well-known problems in OOP. The first chapter caught my attention: it proposes splitting the design into <strong>data classes</strong> and <strong>method classes</strong>.</p> <p>I was trying to grasp the author’s message, and the core idea of the book became clear: when you have a complex UML diagram, it’s often cluttered with arrows - hierarchies between classes and interactions among them - that result in overly complicated designs. One major issue in object-oriented code is the mixing of data and behavior within the same structures.</p> <p>What if, instead, we split the diagram into data classes and method classes? Suddenly, the design becomes much simpler. Most inheritance and composition arrows are confined to the data classes, while the action arrows are isolated within the method classes. This separation creates a system that’s easier to reason about and model. It drastically reduces design complexity - by an order of magnitude - and makes adding features far more straightforward. No more <em>deadly diamonds of death</em>, and the entire structure becomes more maintainable.</p> <p>In OOP, mixing data and behavior into tightly coupled objects creates complex hierarchies. Data becomes scattered across the hierarchy, shared between objects, and often requires synchronization in threaded applications. By isolating data into immutable structures (following chapters), the book argues, you can maintain a single source of truth for the application’s state. This approach makes it inherently safer for multi-threaded code.</p> <p>The idea is simple but powerful: by separating data from behavior, you simplify the design, reduce unnecessary inheritance, and make systems easier to reason about and more threads friendly.</p> <p>The book’s insights make sense for JavaScript, where mutable data is hard to control. Immutability can solve many problems, even if it sometimes means copying data unnecessarily - e.g., filtering a large JSON object just to extract a few fields for use as method parameters, a scenario that occurs frequently. Thankfully, JavaScript engines are optimized for this kind of workload.</p> <p>Fun fact: In my most recent JavaScript project, I naturally gravitated toward solutions similar to those proposed in the book, even without consciously applying Data-Oriented Programming principles. With this new perspective, I plan to revisit my architecture through the lens of DOP to see if there’s anything I might have overlooked.</p> <h4 id="rusts-unique-approach">Rust’s Unique Approach</h4> <p>But as I thought about applying these ideas in Rust, I realized something: Rust takes a different path to solve the same problems. Instead of relying on immutability, Rust enforces ownership and borrowing rules that eliminate shared mutable state at compile time. This achieves thread safety and simpler designs without the performance trade-offs of immutability.</p> <p>Here’s how Rust handles data:</p> <ol> <li> <strong>Ownership</strong>: A function can take ownership of data, meaning it’s the only one allowed to use it: <div class="language-rust highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">fun</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">DataType</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <strong>Immutable References</strong>: A function can borrow an immutable reference, allowing multiple readers but no mutation: <div class="language-rust highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">fun</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">:</span> <span class="n">DataType</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <strong>Mutable References</strong>: A function can borrow a mutable reference, allowing exclusive mutation but no sharing: <div class="language-rust highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">fun</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">data</span><span class="p">:</span> <span class="n">DataType</span><span class="p">);</span>
</code></pre></div> </div> </li> </ol> <p>And when it comes to threads, Rust provides <a href="https://blog.rust-lang.org/2015/04/10/Fearless-Concurrency.html" rel="external nofollow noopener" target="_blank">powerful abstractions</a> to ensure memory safety:</p> <ul> <li> <strong>Channels</strong>: Transfer ownership of data between threads safely.</li> <li> <strong>Locks</strong>: Rust enforces that locked data can only be accessed while the lock is held, preventing accidental sharing.</li> <li> <strong>Send and Sync Traits</strong>: Rust statically ensures that types are only shared across threads when it’s safe to do so.</li> </ul> <p>By design, Rust makes it impossible to accidentally introduce shared mutable state, which is often the root cause of concurrency bugs.</p> <h4 id="aligning-rust-with-data-oriented-programming">Aligning Rust with Data-Oriented Programming</h4> <p>Rust’s approach is inherently data-oriented. The focus on ownership means data structures are self-contained, and the type system encourages linear, cache-friendly layouts like <code class="language-plaintext highlighter-rouge">Vec</code> or slices. Unlike the class hierarchies of OOP, Rust’s data structures are simple and efficient by default, aligning with the principles of data-oriented programming.</p> <p>That said, the DOP approach described in Sharvit’s book still appeals to me. For JavaScript and TypeScript projects, separating data and methods can significantly simplify designs, especially for web applications where immutability works well with reactive frameworks.</p> <h4 id="conclusion-choosing-the-right-tool">Conclusion: Choosing the Right Tool</h4> <p>In the end, while Rust and DOP take different paths, they share the same goal: reducing complexity and making applications easier to think about.</p> <p>For JavaScript and TypeScript projects, I’ll happily apply DOP principles in my next designs. For Rust, I’m excited to explore how its ownership model and other paradigms can influence data-heavy systems.</p> <p>What about you? Are you embracing these approaches in your own projects? Let me know how they’ve worked for you - or what challenges you’ve faced - when simplifying your designs.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/evolution-of-gaussian-splatting/">The Evolution of Scientific Curiosity - From Triangles to Gaussians in Graphics</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/inquiry-based-learning/">Inquiry-Based Learning - Navigating the Path to Deep Understanding in Class</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Unison/">Function Hashing - A Simple Idea with Powerful Implications (Unison)</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/rust-workspaces/">Rust Workspaces</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/acronym-tooltips/">From Print to Pixel - Transforming Acronym Usage in Academic Writing</a> </li> </div> </div> <div style="display: block;margin-left: auto;margin-right: auto;width:390px; height:auto"> <iframe width="390" height="640" src="https://d0603c1e.sibforms.com/serve/MUIFAIYEiBZci2ygtkVoUd-ftWVPvWukUBK5dppPV2jSzE61MhWvtpe5R71J9wkcXq-wNpRCLUGoa8BIudNdWoU2nYYmgzQ_8-LhexlS-ObD5rGi-VUlwPWBqrk3UqoDGYZgLqQ1_b4xY5gUH2hZoVI1xgBB2Wtl70DAf-CVJY8L-CvaKanNzjxjH_F2Vqzj19vV5D6S7qp6Nghr" frameborder="0" scrolling="auto" allowfullscreen style="display: block;margin-left: auto;margin-right: auto;max-width: 100%;"></iframe> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Daniele Bonatto. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: January 30, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>